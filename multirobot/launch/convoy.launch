<launch>

	<arg name="namespace_0" default="volta_0" />
	<arg name="namespace_1" default="volta_1" />
	<arg name="namespace_2" default="volta_2" />
	<arg name="namespace_3" default="volta_3" />
    
	<include file="$(find multirobot)/launch/convoy_world.launch"/>
    <include file="$(find navigation)/launch/map.launch"/>

    <!-- LEADER -->
    <include file="$(find multirobot)/launch/robot.launch">
        <arg name="namespace" default="$(arg namespace_0)" />
        <arg name="x_pos" default="2.0" />
        <arg name="y_pos" default="0.0" />
        <arg name="yaw" default="-1.5708" />
    </include>
	<arg name="keyboard" default="false" />
    <rosparam command="load" file="$(find volta_teleoperator)/config/joy.yaml" unless="$(arg keyboard)" />
    <node pkg="joy" type="joy_node" name="joy_node"  unless="$(arg keyboard)" />
    <node pkg="volta_teleoperator" type="volta_joy_teleop_node" name="joy_teleop" output="screen" unless="$(arg keyboard)">
      <remap from="/joy/cmd_vel" to="/volta_0/cmd_vel"/>
    </node>
    <include file="$(find navigation)/launch/localization.launch">
        <arg name="namespace" value="$(arg namespace_0)"/>
        <arg name="initial_pose_x"  default="0.0"/>
        <arg name="initial_pose_y"  default="2.0"/>
        <arg name="initial_pose_a"  default="0.0"/>        
    </include>
	
	<!-- FOLLOWER 1 -->
	<include file="$(find multirobot)/launch/robot.launch">
        <arg name="namespace" default="$(arg namespace_1)" />
        <arg name="x_pos" default="0.0" />
        <arg name="y_pos" default="0.0" />
        <arg name="yaw" default="-1.5708" />
    </include>
    <include file="$(find navigation)/launch/localization.launch">
        <arg name="namespace" value="$(arg namespace_1)"/>
        <arg name="initial_pose_x"  default="0.0"/>
        <arg name="initial_pose_y"  default="0.0"/>
        <arg name="initial_pose_a"  default="0.0"/>        
    </include>
	<include file="$(find navigation)/launch/navigation.launch">
		<arg name="namespace" value="$(arg namespace_1)"/>
	</include>

</launch>